import{_ as e,S as a,T as l,U as t,r as n,B as i,i as d,n as r,e as o,A as s,f as c,c as u,q as m,g as p,V as g,v as h,z as f,p as v,j as b,b as w,C as y,h as C,W as k,X as _,l as x}from"./index-e628df01.js";import{u as P,t as z,a as S,_ as B}from"./useTablePage-df63ea3c.js";const V=e=>(v("data-v-6b97ed4c"),e=e(),b(),e),D={class:"scroll-y"},q={class:"mr-3 rowSS"},j=V((()=>c("span",{style:{"vertical-align":"middle"}},"增加",-1))),T=V((()=>c("span",{style:{"vertical-align":"middle"}},"删除",-1))),E=w("查询"),U=V((()=>c("p",null,"Notice:",-1))),$=w(" 值班会议主持 "),I=V((()=>c("br",null,null,-1))),W=w(" - 1. 每周六晚 20:00 例会 "),A=V((()=>c("br",null,null,-1))),F=w(" - 2. 每周项目进度汇报 - 使用项目周报功能 "),L=V((()=>c("br",null,null,-1))),M=w(" - 3. 每周定期网站备份，检查是否备份 "),N=V((()=>c("br",null,null,-1))),O=w("编辑"),R=w("详情"),H=w("删除"),X={class:"block columnCC mt-2"},G={class:"detail-container rowBC"},J={class:"detail-container-item"},K={class:"detail-container rowBC"},Q={class:"detail-container-item"},Y={class:"detail-container rowBC"},Z={class:"detail-container-item"},ee={class:"dialog-footer"},ae=w("确 定"),le={name:"Brand",data:()=>({listData:[]}),methods:{queryData(){let e=this;d({url:"/v1/teamwork/onduty",method:"get",data:{},isParams:!0}).then((a=>{e.listData=a.schedule,a.schedule}))}},mounted(){this.queryData()}};var te=e(Object.assign(le,{setup(e){a((()=>{})),l((()=>{}));let v=t([]);const b=e=>{v.value=e};let w=t([]),V=n({id:"",name:"",image:"",letter:"",seq:""}),le=0;i((()=>{ie()}));let{startEndArr:te,totalPage:ne}=P(),ie=()=>{const e=Object.assign(V,{pageNum:de.value,pageSize:re.value});Object.keys(e).forEach((a=>{""!==e[a]&&null!==e[a]&&void 0!==e[a]||delete e[a]})),d({url:"/integration-front/brand/selectPage",method:"get",data:e,isParams:!0}).then((e=>{var a,l;w.value=null==(a=e.data)?void 0:a.records,ne=null==(l=e.data)?void 0:l.total}))},{pageNum:de,pageSize:re,handleCurrentChange:oe,handleSizeChange:se}=z(ie);const ce=e=>{le=22},ue=()=>{de.value=1,ie()};let{elMessage:me,elConfirm:pe}=S();const ge=t(null),he=()=>{let e=[],a="";if(e=v.value.map((e=>(a=a+e.name+",",e.id))),0===e.length)return void me("表格选项不能为空","warning");let l=a.length-1;pe("删除",`您确定要删除【${a.slice(0,l)}】吗`).then((()=>{d({url:"/integration-front/brand/deleteBatchIds",data:e,method:"DELETE",bfLoading:!0}).then((e=>{me("删除成功"),ie()}))})).catch((()=>{}))};let fe=e=>{pe("确定",`您确定要删除【${e.name}】吗？`).then((()=>{var a;(a=e.id,d({url:"/integration-front/brand/deleteById",data:{id:a},isParams:!0,method:"delete",bfLoading:!0})).then((()=>{ie(),me(`【${e.name}】删除成功`)}))})).catch((()=>{}))},ve=t(!1);const be=t(null);let we=()=>{ve.value=!0,y((()=>{be.value.showModal()}))};i((()=>{}));const ye=()=>{ve.value=!1};let Ce=e=>{ze(e.id).then((e=>{ve.value=!0,y((()=>{be.value.showModal(!0,e.data)}))}))},ke=t({}),{dialogTitle:_e,detailDialog:xe}=S(),Pe=e=>{_e.value=`详情【${e.name}】`,ze(e.id).then((e=>{ke.value=e.data,xe.value=!0}))},ze=e=>d({url:"/integration-front/brand/selectById",data:{id:e},isParams:!0,method:"get"});return(e,a)=>{const l=r("el-icon"),t=r("el-button"),n=r("el-input"),i=r("el-form-item"),d=r("el-date-picker"),v=r("el-form"),w=r("el-table-column"),y=r("el-table"),P=r("el-pagination"),z=r("el-dialog");return C(),o("div",D,[s("操作"),c("div",q,[u(t,{type:"primary",onClick:p(we)},{default:m((()=>[u(l,{style:{"vertical-align":"middle"}},{default:m((()=>[u(p(k))])),_:1}),j])),_:1},8,["onClick"]),u(t,{type:"primary",onClick:he},{default:m((()=>[u(l,{style:{"vertical-align":"middle"}},{default:m((()=>[u(p(_))])),_:1}),T])),_:1}),s("条件搜索"),u(v,{ref:"refsearchForm",inline:!0,class:"demo-searchForm ml-2"},{default:m((()=>[u(i,{"label-width":"0px",label:"",prop:"username","label-position":"left"},{default:m((()=>[s("  --c "),u(n,{modelValue:p(V).name,"onUpdate:modelValue":a[0]||(a[0]=e=>p(V).name=e),class:"widthPx-150",placeholder:"Weeknum"},null,8,["modelValue"])])),_:1}),u(i,{"label-width":"0px",label:"",prop:"createTime","label-position":"left"},{default:m((()=>[u(d,{modelValue:p(le),"onUpdate:modelValue":a[1]||(a[1]=e=>h(le)?le.value=e:le=e),type:"week",format:"[Week] ww",placeholder:"Pick a week",class:"widthPx-250",onChange:ce},null,8,["modelValue"])])),_:1})])),_:1},512),s("查询按钮"),u(t,{type:"primary",onClick:ue},{default:m((()=>[E])),_:1})]),U,$,I,W,A,F,L,M,N,s("表格和分页"),u(y,{id:"resetElementDialog",ref_key:"refuserTable",ref:ge,height:`calc(100vh - ${p(g).delWindowHeight})`,border:"",data:e.listData,onSelectionChange:b},{default:m((()=>[u(w,{type:"selection",align:"center",width:"50"}),u(w,{align:"center",prop:"week",label:"week number",width:"80"}),u(w,{align:"center",prop:"createdBy",label:"本周值班","min-width":"100"}),u(w,{align:"center",prop:"createdBy",label:"下周值班","min-width":"100"},{default:m((()=>[s(' <template #default="{ row }"> '),s(' <img :src="row.image" class="widthPx-120 heightPx-120" style="border-radius: 10px" /> '),s(" </template> ")])),_:1}),u(w,{align:"center",prop:"seq",label:"score",width:"80"}),u(w,{align:"center",prop:"createdAt",label:"创建时间",width:"140"}),u(w,{align:"center",prop:"updateTime",label:"更新时间",width:"140"}),s("点击操作"),u(w,{fixed:"right",align:"center",label:"操作",width:"180"},{default:m((({row:e})=>[u(t,{type:"text",size:"small",onClick:a=>p(Ce)(e)},{default:m((()=>[O])),_:2},1032,["onClick"]),u(t,{type:"text",size:"small",onClick:a=>p(Pe)(e)},{default:m((()=>[R])),_:2},1032,["onClick"]),u(t,{type:"text",size:"small",onClick:a=>p(fe)(e)},{default:m((()=>[H])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["height","data"]),s("分页"),c("div",X,[u(P,{"current-page":p(de),"page-sizes":[10,20,50,100],"page-size":p(re),layout:"total, sizes, prev, pager, next, jumper",total:p(ne),onSizeChange:p(se),onCurrentChange:p(oe)},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),s("详情"),u(z,{modelValue:p(xe),"onUpdate:modelValue":a[3]||(a[3]=e=>h(xe)?xe.value=e:xe=e),title:p(_e),width:"500px","close-on-click-modal":!1},{footer:m((()=>[c("span",ee,[u(t,{type:"primary",onClick:a[2]||(a[2]=e=>h(xe)?xe.value=!1:xe=!1)},{default:m((()=>[ae])),_:1})])])),default:m((()=>[c("div",G,[c("div",J,"品牌名称："+x(p(ke).name),1)]),c("div",K,[c("div",Q,"品牌首字母："+x(p(ke).letter),1)]),c("div",Y,[c("div",Z,"排序："+x(p(ke).seq),1)])])),_:1},8,["modelValue","title"]),p(ve)?(C(),f(B,{key:0,ref_key:"refCRUDForm",ref:be,onHideComp:ye,onSelectPageReq:p(ie)},null,8,["onSelectPageReq"])):s("v-if",!0)])}}}),[["__scopeId","data-v-6b97ed4c"]]);export{te as default};
