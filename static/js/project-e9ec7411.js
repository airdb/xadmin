var e=Object.defineProperty,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,n=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,i=(e,i)=>{for(var r in i||(i={}))l.call(i,r)&&n(e,r,i[r]);if(a)for(var r of a(i))t.call(i,r)&&n(e,r,i[r]);return e};import{_ as r,U as o,r as d,B as s,i as c,n as p,e as u,A as m,f as g,c as h,q as f,g as v,V as b,v as w,z as y,C,h as k,W as _,X as x,l as j,p as P,j as z,b as S}from"./index-e628df01.js";import{u as T,t as M,a as V,_ as D}from"./useTablePage-df63ea3c.js";const Y=e=>(P("data-v-1a65ad12"),e=e(),z(),e),B={class:"scroll-y"},I={class:"mr-3 rowSS"},E=Y((()=>g("span",{style:{"vertical-align":"middle"}},"增加",-1))),O=Y((()=>g("span",{style:{"vertical-align":"middle"}},"删除",-1))),W=S("查询"),q=S("编辑"),U=S("详情"),$=S("删除"),H={class:"block columnCC mt-2"},A={class:"detail-container rowBC"},F={class:"detail-container-item"},L={class:"detail-container rowBC"},N={class:"detail-container-item"},R={class:"detail-container rowBC"},X={class:"detail-container-item"},G={class:"dialog-footer"},J=S("确 定");var K=r({setup(e){let a=o([]);const l=e=>{a.value=e};let t=o([]);const n=o([]);let r=d({id:"",name:"",image:"",letter:"",seq:""});s((()=>{S()}));let{startEndArr:P,totalPage:z}=T(),S=()=>{c({url:"/v1/teamwork/project",method:"get"}).then((e=>{var a;t.value=null==(a=e.project)?void 0:a.reduce(((e,a)=>{const l=i({},a);let t=(null==a?void 0:a.taskProcess)||[];return l.taskProcess=void 0,t.length&&(n.value=[...n.value,t.length,...new Array(t.length-1).fill(0)],t=t.map((e=>i(i({},e),l)))),[...e,...t]}),[])}))},{pageNum:Y,pageSize:K,handleCurrentChange:Q,handleSizeChange:Z}=M(S);const ee=e=>{e&&2===e.length?(r.startTime=e[0],r.endTime=e[1]):(r.startTime="",r.endTime="")},ae=()=>{Y.value=1,S()};function le({rowIndex:e,columnIndex:a}){if([1,2,3,7,8].includes(a)){const a=n.value[e];return a>0?{rowspan:a,colspan:1}:{rowspan:0,colspan:0}}}let{elMessage:te,elConfirm:ne}=V();const ie=o(null),re=()=>{let e=[],l="";if(e=a.value.map((e=>(l=l+e.name+",",e.id))),0===e.length)return void te("表格选项不能为空","warning");let t=l.length-1;ne("删除",`您确定要删除【${l.slice(0,t)}】吗`).then((()=>{c({url:"/integration-front/brand/deleteBatchIds",data:e,method:"DELETE",bfLoading:!0}).then((e=>{te("删除成功"),S()}))})).catch((()=>{}))};let oe=e=>{ne("确定",`您确定要删除【${e.name}】吗？`).then((()=>{var a;(a=e.id,c({url:"/integration-front/brand/deleteById",data:{id:a},isParams:!0,method:"delete",bfLoading:!0})).then((()=>{S(),te(`【${e.name}】删除成功`)}))})).catch((()=>{}))},de=o(!1);const se=o(null);let ce=()=>{de.value=!0,C((()=>{se.value.showModal()}))};s((()=>{}));const pe=()=>{de.value=!1};let ue=e=>{ve(e.id).then((e=>{de.value=!0,C((()=>{se.value.showModal(!0,e.data)}))}))},me=o({}),{dialogTitle:ge,detailDialog:he}=V(),fe=e=>{ge.value=`详情【${e.name}】`,ve(e.id).then((e=>{me.value=e.data,he.value=!0}))},ve=e=>c({url:"/integration-front/brand/selectById",data:{id:e},isParams:!0,method:"get"});return(e,a)=>{const n=p("el-icon"),i=p("el-button"),o=p("el-input"),d=p("el-form-item"),s=p("el-date-picker"),c=p("el-form"),C=p("el-table-column"),T=p("el-table"),M=p("el-pagination"),V=p("el-dialog");return k(),u("div",B,[m("操作"),g("div",I,[h(i,{type:"primary",onClick:v(ce)},{default:f((()=>[h(n,{style:{"vertical-align":"middle"}},{default:f((()=>[h(v(_))])),_:1}),E])),_:1},8,["onClick"]),h(i,{type:"primary",onClick:re},{default:f((()=>[h(n,{style:{"vertical-align":"middle"}},{default:f((()=>[h(v(x))])),_:1}),O])),_:1}),m("条件搜索"),h(c,{ref:"refsearchForm",inline:!0,class:"demo-searchForm ml-2"},{default:f((()=>[h(d,{"label-width":"0px",label:"",prop:"username","label-position":"left"},{default:f((()=>[m("  --c "),h(o,{modelValue:v(r).name,"onUpdate:modelValue":a[0]||(a[0]=e=>v(r).name=e),class:"widthPx-150",placeholder:"用户名"},null,8,["modelValue"])])),_:1}),h(d,{"label-width":"0px",label:"",prop:"createTime","label-position":"left"},{default:f((()=>[h(s,{modelValue:v(P),"onUpdate:modelValue":a[1]||(a[1]=e=>w(P)?P.value=e:P=e),type:"datetimerange",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD HH:mm:ss",class:"widthPx-250","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",onChange:ee},null,8,["modelValue"])])),_:1})])),_:1},512),m("查询按钮"),h(i,{type:"primary",onClick:ae},{default:f((()=>[W])),_:1})]),m("表格和分页 "),h(T,{id:"resetElementDialog",ref_key:"refuserTable",ref:ie,height:`calc(100vh - ${v(b).delWindowHeight})`,border:"",data:v(t),"span-method":le,onSelectionChange:l},{default:f((()=>[h(C,{type:"selection",align:"center",width:"50"}),m(' <el-table-column align="center" prop="pid" label="姓名" width="80" /> '),h(C,{align:"center",prop:"projectName",label:"Project","min-width":"100"}),h(C,{align:"center",prop:"projectStatus",label:"Status",width:"80"}),h(C,{align:"center",prop:"projectMilestone",label:"Milestone","min-width":"100"}),h(C,{align:"center",prop:"email",label:"Member",width:"120"}),h(C,{align:"center",prop:"thisWeek",label:"This Week","min-width":"100"}),h(C,{align:"center",prop:"nextWeek",label:"Next Week","min-width":"100"}),h(C,{align:"center",prop:"createTime",label:"创建时间",width:"80"}),h(C,{align:"center",prop:"updateTime",label:"更新时间",width:"80"}),m("点击操作"),h(C,{fixed:"right",align:"center",label:"操作",width:"180"},{default:f((({row:e})=>[h(i,{type:"text",size:"small",onClick:a=>v(ue)(e)},{default:f((()=>[q])),_:2},1032,["onClick"]),h(i,{type:"text",size:"small",onClick:a=>v(fe)(e)},{default:f((()=>[U])),_:2},1032,["onClick"]),h(i,{type:"text",size:"small",onClick:a=>v(oe)(e)},{default:f((()=>[$])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["height","data"]),m("分页"),g("div",H,[h(M,{"current-page":v(Y),"page-sizes":[10,20,50,100],"page-size":v(K),layout:"total, sizes, prev, pager, next, jumper",total:v(z),onSizeChange:v(Z),onCurrentChange:v(Q)},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),m("详情"),h(V,{modelValue:v(he),"onUpdate:modelValue":a[3]||(a[3]=e=>w(he)?he.value=e:he=e),title:v(ge),width:"500px","close-on-click-modal":!1},{footer:f((()=>[g("span",G,[h(i,{type:"primary",onClick:a[2]||(a[2]=e=>w(he)?he.value=!1:he=!1)},{default:f((()=>[J])),_:1})])])),default:f((()=>[g("div",A,[g("div",F,"品牌名称："+j(v(me).name),1)]),g("div",L,[g("div",N,"品牌首字母："+j(v(me).letter),1)]),g("div",R,[g("div",X,"排序："+j(v(me).seq),1)])])),_:1},8,["modelValue","title"]),v(de)?(k(),y(D,{key:0,ref_key:"refCRUDForm",ref:se,onHideComp:pe,onSelectPageReq:v(S)},null,8,["onSelectPageReq"])):m("v-if",!0)])}}},[["__scopeId","data-v-1a65ad12"]]);export{K as default};
